<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Koora Forja</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background-color: #000; color: #ffd700; }
    .match-card { background: #111; border: 1px solid #333; border-radius: 12px; padding: 10px; margin: 10px 0; }
    .match-card:hover { background: #222; }
  </style>
</head>
<body class="font-sans p-4">
  <header class="text-center mb-4">
    <h1 class="text-3xl font-bold mb-2">⚽ Koora Forja</h1>
    <button id="langToggle" class="text-sm bg-yellow-600 px-2 py-1 rounded">AR / EN</button>
  </header>

  <main id="matchesContainer" class="space-y-2"></main>

  <footer class="text-center text-xs mt-4 opacity-70">
    © 2025 Koora Forja | Powered by TheSportsDB API
  </footer>

  <script>
    const API_BASE = 'https://koora-forja-backend.onrender.com/api';
    const matchesContainer = document.getElementById('matchesContainer');
    const langToggle = document.getElementById('langToggle');
    let currentLang = 'ar';

    function renderMatches(matches) {
      matchesContainer.innerHTML = '';
      matches.forEach(m => {
        const card = document.createElement('div');
        card.className = 'match-card';
        card.innerHTML = `
          <div class="text-lg font-semibold">${m.home} 🆚 ${m.away}</div>
          <div class="text-sm">${m.league}</div>
          <div class="text-sm">🕒 ${m.time}</div>
          <div class="text-sm">📺 ${m.channels.join(', ')}</div>
        `;
        matchesContainer.appendChild(card);
      });
    }

    async function fetchMatches() {
      try {
        const res = await fetch(\`\${API_BASE}/matches\`);
        const data = await res.json();
        renderMatches(data);
      } catch (err) {
        matchesContainer.innerHTML = '<p class="text-center text-red-500">⚠️ خطأ في جلب البيانات</p>';
      }
    }

    langToggle.addEventListener('click', () => {
      currentLang = currentLang === 'ar' ? 'en' : 'ar';
      document.body.dir = currentLang === 'ar' ? 'rtl' : 'ltr';
    });

    fetchMatches();
  </script>
</body><!-- 🏆 قسم البطولات -->
<section id="leagues" class="mt-8 text-center">
  <h2 style="color: gold; font-size: 22px; margin-bottom: 10px;">🏆 البطولات الكبرى</h2>
  <div id="leagueList" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">
    <!-- البطولات كيتزادو أوتوماتيكياً من JavaScript -->
  </div>
</section>

<script>
  const leagues = [
    { id: 4328, name: 'Premier League', flag: '🇬🇧' },
    { id: 4335, name: 'La Liga', flag: '🇪🇸' },
    { id: 4331, name: 'Serie A', flag: '🇮🇹' },
    { id: 4332, name: 'Bundesliga', flag: '🇩🇪' },
    { id: 4334, name: 'Ligue 1', flag: '🇫🇷' },
    { id: 4350, name: 'Botola Pro', flag: '🇲🇦' }
  ];

  const leagueList = document.getElementById('leagueList');
  leagues.forEach(league => {
    const div = document.createElement('div');
    div.style.cssText = `
      background: black;
      color: gold;
      border: 1px solid gold;
      border-radius: 10px;
      padding: 10px 20px;
      cursor: pointer;
      font-weight: bold;
    `;
    div.textContent = `${league.flag} ${league.name}`;
    div.onclick = () => showLeagueMatches(league.id);
    leagueList.appendChild(div);
  });

  async function showLeagueMatches(leagueId) {
    const res = await fetch(`${API_BASE}/leagues/${leagueId}/matches`);
    const data = await res.json();
    // عرض الماتشات
    const matchList = document.getElementById('matchList');
    matchList.innerHTML = '';
    data.matches.forEach(match => {
      const li = document.createElement('li');
      li.textContent = `${match.strHomeTeam} vs ${match.strAwayTeam} - ${match.dateEvent}`;
      matchList.appendChild(li);
    });
  }
</script>
</html>
